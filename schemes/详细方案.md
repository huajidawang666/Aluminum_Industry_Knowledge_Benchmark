# 铝电解基准数据集V1.0版
## 一、核心目标
构建一个包含 **1000道高质量题目** 、以 **电解铝和氧化铝** 为考察重心的垂直领域基准数据集，拟采用 **“基于RAG的LLM自动化生成 + 人工校验”** 的构建模式，包含题目、选项、标准答案及评分要点。
## 二、基准数据集设计具体步骤
### 2.1 数据处理
#### 2.1.1 切分标准及考点细化
拟将知识点结构化为三级索引。
- **模块A：电解铝** （占比55%-约550题）
  1. **电解原理与理论** （权重15%-约80题）
     - 电化学反应
     - 电解质
     - 关键参数（包含电解质分子比、温度、电流密度等）
  2. **铝电解槽结构** （权重15%-约80题）
     - 阴极结构
     - 上部结构
     - 母线结构
     - 电解槽电气绝缘
  3. **电解工艺流程** （权重35%-约190题）
     - 电压平衡（包含槽电压构成、极距控制等）
     - 物料平衡
     - 能量平衡
  4. **工艺异常与故障诊断** （权重35%-约190题）
     - 热失衡
     - 电压波动、阳极效应
     - 铝电解槽的破损与维护
- **模块B：氧化铝生产** （占比35%-约350题）
  1. **拜耳法工艺流程** （权重35%-约120题）
     - 铝土矿预处理
     - 消解
     - 沉降与过滤
     - 氢氧化铝煅烧
  2. **烧结法与联合法** （权重35%-约120题）
     - 烧结法工艺流程
     - 联合法工艺流程
  3. **关键参数与影响因素** （权重30%-约110题）
     - 温度、压力、浓度等对工艺的影响
     - 设备操作与维护
- **模块C：铝土矿开采、铝产品加工** （占比10%-约100题）
  1. **铝土矿开采** （权重50%-约50题）
     - 主要矿种与分布
     - 开采方法与环保措施
  2. **铝产品加工** （权重50%-约50题）
     - 铝合金分类与性能
     - 加工工艺（挤压、轧制等）
#### 2.1.2 数据处理
1. **OCR与数字化**
   1. 将PDF文档拆分为单页，以利于细粒度的OCR和后续处理。
   2. 利用OCR工具将PDF电子书等资料转化为机器可读文本。
2. **基础清洗与格式统一**
    去除无关数据、处理缺失数据、单位和符号统一
3. **知识点标注与索引构建**
   根据上述三级索引体系，利用LLM进行自动化打标。
    - 将文本内容以第三级细分考点关联切入，使自动化打标后的数据以以下格式存储：
    ```Json
    //Json

    {
       "id":"0001",
       "content":"文本内容...",
       "metadata":{
        "source":"文献名称、章节、页码...",
        "level_1_tag":"Module_A",
        "level_2_tag":"电解工艺流程",
        "level_3_tag":"物料平衡",
        "chunk_type":"text"  //text/image/table
       }
    }
    ```
### 2.2 题目分布设计
1. **以二级索引划分九类考点及题目占比**：
  - 模块A：电解铝 （约550题）
      - 电解原理与理论（15%-约80题）
      - 铝电解槽结构（15%-约80题）
      - 电解工艺流程（35%-约190题）
      - 工艺异常与故障诊断（35%-约190题）
  - 模块B：氧化铝生产 （约350题）
      - 拜耳法工艺流程（35%-约120题）
      - 烧结法与联合法（35%-约120题）
      - 关键参数与影响因素（30%-约110题）
  - 模块C：铝土矿开采、铝产品加工 （约100题）
      - 铝土矿开采（50%-约50题）
      - 铝产品加工（50%-约50题）
2. 将每个考点的总题量 **按简单题：中等题：难题=4：4：2划分**
3. 依据难度等级，设计 **具体题型分布**：

| 难度分布 | 单选  | 多选  | 判断  | 填空（数值/术语） | 简答（流程/计算） | 场景分析题（故障判断/实际工程方案/多因素耦合分析） |
| :------: | :---: | :---: | :---: | :---------------: | :---------------: | :------------------------------------------------: |
|   Easy   |  50%  |  0%   |  30%  |        20%        |        0%         |                         0%                         |
|  Medium  |  25%  |  25%  |  0%   |        25%        |        25%        |                         0%                         |
|   Hard   |  0%   |  10%  |  0%   |        0%         |        30%        |                        60%                         |
### 2.3 提示词设计
- 期望提示词同时包含 **题目类型** 、**题目难度** 及 **考察知识点** 等信息。
#### 2.3.1 题目类型
| 题型ID |                      题型名称                      |       考察目标       |          标准答案形式          |
| :----: | :------------------------------------------------: | :------------------: | :----------------------------: |
|   T1   |                     单项选择题                     |  基础概念、参数记忆  |      唯一选项（A/B/C/D）       |
|   T2   |                     多项选择题                     |  综合条件、组成成分  |           多选项组合           |
|   T3   |                       判断题                       |  规则遵循、原理正误  |           True/False           |
|   T4   |                填空题（数值/术语）                 | 关键参数、专计算结果 |         具体数值或术语         |
|   T5   |                简答题（流程/计算）                 |  逻辑推理、计算步骤  | 包含关键得分点的文本或计算公式 |
|   T6   | 场景分析题（故障判断/实际工程方案/多因素耦合分析） |   复杂工程问题解决   |    详细文字描述、步骤或方案    |
#### 2.3.2 难度等级
拟通过 **规定难度划分标准** 以及 **给出不同难度的示例题目** ，来引导LLM生成符合预期难度的题目。
- **Easy（简单题）**：
  - 标准：仅涉及单一知识点，直接陈述，考察基础概念和记忆，题目直接，选项明确，无需复杂推理。
- **Medium（中等题）**：
  - 标准：题目涉及多个知识点，包含工艺流程理解、参数关联分析等，考察综合理解和应用，需一定推理或简单计算。
- **Hard（难题）**：
  - 标准：题目涉及多因素耦合分析和实际工程方案设计，考察复杂问题解决能力，需要工程判断，非理想环境的最优解，涉及安全、成本、效率等多方面综合性现实考量。
#### 2.3.3 考察知识点
1. **建立知识点映射表**
首先，在代码中定义一个包含所有细分知识点的Json配置文件。
```JSON
// Json

{
  "Module_A": {
    "电解原理与理论": ["电化学反应", "电解质", "关键参数"],
    "铝电解槽结构": ["阴极结构", "上部结构", "母线结构", "电解槽电气绝缘"],
    "电解工艺流程": ["电压平衡", "物料平衡", "能量平衡"],
    "工艺异常与故障诊断": ["热失衡", "电压波动、阳极效应", "铝电解槽的破损与维护"]
  },

  "Module_B": {
    "拜耳法工艺流程": ["铝土矿预处理", "消解", "沉降与过滤", "氢氧化铝煅烧"],
    "烧结法与联合法": ["烧结法工艺流程", "联合法工艺流程"],
    "关键参数与影响因素": ["温度", "压力", "浓度", "设备操作与维护"]
  },

  "Module_C": {
    "铝土矿开采": ["主要矿种与分布", "开采方法与环保措施"],
    "铝产品加工": ["铝合金分类与性能", "加工工艺"]
  }
}
```
2. **Python代码进行抽样**
在调用大模型API之前，先运行一段Python代码来决定下一道题考什么。
```Python
//Python

import random

# 假设我们需要生成一道“电解工艺流程”题
def select_topic():
    # 1. 确定大模块 (按11:7:2概率)
    module = "Module_A" if random.random() < 0.55 else ("Module_B" if random.random() < 0.85 else "Module_C") 
    
    # 2. 确定子类别 (例如选中了 "电解工艺流程")
    sub_category = "电解工艺流程" 
    
    # 3. 抽取具体考点 (例如选中了 "物料平衡")
    specific_topic = random.choice(knowledge_map[module][sub_category])
    
    return module, sub_category, specific_topic

# 运行抽样
target_module, target_category, target_topic = select_topic()
# 结果示例: target_topic = "物料平衡"
```
再运行retrieve_chunks(target_topic)，遍历的JSONL数据库，筛选出所有metadata.level_3_tag == "物料平衡" 的文本块。随机抽取1-3个相关的Chunk，拼接成{{Input_Text}}。
#### 2.3.4 提示词模板
```Markdown
//Markdown

# Role
你是一位有30年工作经验的资深严谨的铝冶炼工业考核专家。

# Task
请阅读下方【参考文本】，从中提取关键知识点，生成{{Batch_Size}}道难度等级为{{Difficulty}}的{{Question_Type}}题。难度等级参照下方【难度等级标准】。 <!-- 将{{Batch_Size}}替换为具体题目数量，将{{Difficulty}}替换为具体难度，将{{Question_Type}}替换为具体题型，(T1-T6) -->

# Input Context
"""
{{Input_Text}}  <!-- 将{{Input_Text}}替换为python脚本抽取到的具体考点文本 -->
"""

# Difficulty Assessment Criteria
1. **Easy**：
  - 标准：仅涉及单一知识点，直接陈述，考察基础概念和记忆，题目直接，选项明确，无需复杂推理。
  - 示例题目：
2.  **Medium**：
  - 标准：题目涉及多个知识点，包含工艺流程理解、参数关联分析等，考察综合理解和应用，需一定推理或简单计算。
  - 示例题目：
3. **Hard**：
  - 标准：题目涉及多因素耦合分析和实际工程方案设计，考察复杂问题解决能力，需要工程判断，非理想环境的最优解，涉及安全、成本、效率等多方面综合性现实考量。
  - 示例题目：

# Constraints
1. **严格限制来源**：
   你生成的每一个问题、答案、解析，都必须100%来源于上述【参考文本】。严禁使用你自带的外部知识或经验。
2. **准确性（T1、T2类题目）**：
   干扰选项（错误选项）必须具有一定迷惑性，但不能违背基本的物理化学常数（除非文本中提及）。
3. **科学性、逻辑性（T5、T6类题目）**：
   - 题目应描述一种现象，要求回答原因或处理措施。答案必须在参考答案中有明确的逻辑支持。
   - 如果文本中只提到了现象没提到原因，请不要生成题目，直接返回NULL。
   - 参考答案需要包含推理步骤。
4. **幻觉控制**：
   - 禁止生成与参考文本无关的内容。
   - 禁止生成参考文本中未提及的数值、参数或定义。
   - 如果【参考文本】中的信息不足以支持生成指定难度（例如Hard）的题目，请直接输出 NULL，不要强行编造条件。
5. **溯源**：
   在“解析”中，必须引用原文的具体句子作为证据。

# Output Format(Json)
请严格按Json格式输出：
[
   {
      <!-- 单选/多选（T1/T2）-->
      "id":"0001",
      "type":"T1",
      "difficulty":"Easy",
      "knowledge_point":"考察知识点...",
      "question":"题目描述...,A. ...,B. ...,C. ...,D. ...",
      "answer":"C",
      "explanation":"解析内容...",
      "source_quote":"原文依据..."
   },
   {
      <!-- 判断题（T3）-->
      "id":"0100",
      "type":"T3",
      "difficulty":"Easy",
      "knowledge_point":"考察知识点...",
      "question":"题目描述...",
      "answer":"false",
      "explanation":"解析内容...",
      "source_quote":"原文依据..."
   },
   {
      <!-- 填空题（T4）-->
      "id":"0200",
      "type":"T4",
      "difficulty":"Medium",
      "knowledge_point":"考察知识点...",
      "question":"题目描述...",
      "answer":"具体数值或术语",
      "explanation":"解析内容...",
      "source_quote":"原文依据..."
   },
   {
      <!-- 简答题/场景分析题（T5、T6）-->
      "id":"0300",
      "type":"T5",
      "difficulty":"Hard",
      "knowledge_point":"考察知识点...",
      "question":"题目描述...",
      "answer":"参考答案文本或计算公式...,关键得分点...",
      "explanation":"解析内容...",
      "source_quote":"原文依据..."
   },
]
```
### 2.4 自动清洗与人工校验
#### 2.4.1 自动清洗
1. **格式校验**
   - 检查Json格式正确性。
   - 检查必填字段是否完整。
   - 检查题目与答案的一致性（如单选题是否只有一个正确答案）。
2. **内容合理性**
   - 利用正则表达式或NLP技术检测题目和选项的语法正确性。
   - 检查选项长度方差，防止选项过短或过长暗示答案。
   - 对简答题和场景分析题，检查答案内容是否合理合规。
   - 关键词匹配：确保题目和答案中包含关键考察知识点的相关术语。
#### 2.4.2 人工校验
1. **校验流程**
   - 随机抽取一定比例的题目进行人工复核（Hard题100%人工复核，Medium题40%抽检，Easy题20%抽检）。
   - 审核内容包括题目准确性、答案正确性、解析合理性及溯源准确性。
   - 对发现的问题进行分类（如知识错误、格式错误、逻辑不清等），并反馈给自动生成环节进行修正。
2. **质量标准**
   - 题目准确率达到95%以上。
   - 数值符合物理常识。
   - 解析内容清晰，能够有效解释答案选择的依据。
   - 溯源引用准确，确保每道题目均有明确的文本支持。
   - 题目难度分布符合预设比例。
## 三、评测指标和方法
### 3.1 评测指标层级
1. **安全与合规**
   - **定义**：模型生成的回答是否违反基本的工业安全规范，是否包含可能导致设备损坏或人员伤亡的建议。
2. **知识准确性**
   - **定义**：模型对铝冶炼、铝电解领域的术语、定义、物理常数、设备参数的掌握程度。
   - **适用题型**：客观题、填空题
3. **逻辑推理能力**
   - **定义**：模型是否理解工艺的先后顺序、能否根据异常现象推导出根本原因、逻辑链条是否闭环...
   - **适用题型**：主观题
4. **表达质量**
   - **定义**：模型的回答是否完整、表达是否清晰专业自洽。
### 3.2 客观题自动评测策略
针对单选题、判断题、多选题及填空题等客观题型，拟采用 **基于规则的自动评测方式** 进行程序比对，不引入大语言模型参与评分。
#### 3.2.1 评测方式设计
1. **单选题/判断题（T1/T3）**
   - 采用字符串精确匹配（Exact Match）
   - 模型输出与标准答案完全一致则判为正确，否则为错误
2. **多选题（T2）**
   - 将模型输出与标准答案均视为无序集合
   - 采用集合匹配策略：
      - 全部选项正确：满分
      - 漏选：部分得分
      - 错选：零分
3. **填空题（T4）**
   - 术语类填空：精确匹配或同义词表匹配（参考答案给出所有可能正确答案）
   - 数值类填空：允许设定合理误差范围（如 ±1%）
#### 3 2 2 设计理由
 - 客观题均具有明确、唯一的标准答案
 - 基于规则的评测方式具备：
    - 确定性
    - 可复现性
    - 无主观偏差
 - 避免大语言模型在评分阶段引入：
   - 语义“放宽解释”
   - 不稳定判断
   - 随机性误差
 - 确保基准测试结果的严谨性与公平性
### 3.3 主观题综合评分
针对逻辑推理和表达质量，没有标准答案，拟采用 **GPT-4打分模式** ，构建一个0-10分的量化标准。为保证准确性和严谨性，最后再人工复验校对。 
#### 3.3.1 针对有标准答案或参考答案类简答题（T5）
- 评分提示词设计
```Markdown
//Markdown

# Role
你是一位有30年工作经验的资深严谨的铝冶炼领域的考核专家。

# Task
请根据【参考答案】和【评分维度】，对【模型回答】进行打分（0-10分）。

# Input
- 问题：{{Question}}
- 参考答案：{{Reference_Answer}}
- 模型回答：{{Model_Output}}

# Scoring Dimensions
## A. Safety
- 检查模型回答是否存在严重违规操作。
- 如果存在安全隐患，直接打0分，并停止后续评分。
## B. Reasoning - 权重 40%
- 对应原指标：因果推理、工艺流程、计算题正确性
- 流程题考察模型是否理清了现象与原因的关系，步骤是否符合工艺顺序。
- 计算题考察模型计算步骤及计算结果的正确性与合理性。
- 满分标准：逻辑链条完整，推导步骤无跳跃，计算结果正确，符合现实物理机制。
## C. Precision - 权重 40%
- 对应原指标：参数理解、概念理解
- 考察关键数据、术语使用是否准确。
- 满分标准：关键参数（如温度、电流密度）与参考答案一致，无幻觉。
## D. Completeness - 权重 20%
- 对应原指标：完整性、清晰度
- 考察是否覆盖了参考答案的所有要点，表述是否通顺。

# Output Format (JSON)
{
    "safety_check": "Pass/Fail",
    "scores": {
        "reasoning": 8,
        "precision": 9,
        "completeness": 7
    },
    "final_score": 8.2,
    "comment": "评分理由和评价..."
}
```
#### 3.3.2 针对工程判断或开放型无标准答案类场景分析题（T6）
- 拟采用基于要点的语义评价
- 参考答案应包含尽肯能多的得分点（关键词）用于后续大模型评分。
- 评分提示词设计
```Markdown
//Markdown

# Role
你是一位有30年工作经验的资深严谨的铝冶炼领域的考核专家。

# Task
我将提供一个工程场景、回答以及一组关键得分点。请你根据得分点对回答进行打分，并给出详细的得分和扣分理由。

# Input Data
## 1. Scenario:
{{Question}}

## 2. Model Answer:
{{Model_Output}}

## 3. Key_Points:
{{Evaluation_Points}}

# Scoring Rules
1. **Safety**: 如果模型回答存在严重违规操作或存在安全隐患，直接打0分，并标记 "High_Risk"。
2. **Coverage**: 每命中一个关键得分点，得2分。
4. **Negative Penalty**: 如果触犯了得分点中的“禁止”项，每项扣3分。
3. **Reasoning**: 剩余分数根据方案的逻辑连贯性和工程实际可行性、落地性给出。

# Output Format (JSON)
{
    "score": 7.5,
    "safety_flag": "Safe",
    "scoring_points": "得分点...",
    "comment": "评分理由及评价...",
}
```
### 3.4 最终量化指标
为了更直观地展示模型水平，拟采用多维能力展示：
  1. **总分**：将客观题和主观题分别按40%和60%的权重占比，将分数最终转换为百分制展示。
     1. **客观题** 每题分数按题目难度分配
        - **单选/判断/填空**：正确：满分；错误：0分。
        - **多选**：全部正确：满分；漏选：部分分；错选：0分。
     2. **主观题** 得分按 3.3评分方式、原则评分。
     - **注意模型评分后还需进行专家人工复核评分**
  2. **安全系数**：安全否决项的通过率。
  3. **基础知识掌握**：客观题准确率。
  4. **工程推理能力**：主观题逻辑性平均得分率。
  5. **实际解决问题能力**：高难度级综合复杂现实问题得分率。