# 用于评测大模型铝工业知识水平的基准数据集制作方案
## 一、目标定义
本文所构建的基准数据集是指：
>一套以权威铝冶炼相关教材、专著及综述文献等为知识来源，通过提示词AI生成、人工整理和结构化设计形成的标准化问题-答案对集合，用于评测大语言模型在铝工业领域的知识水平。
- **评测目标**：明确希望评测模型在铝工业方面的知识水平。例如：
  - 铝冶炼的历史与发展
  - 铝冶炼和铝电解的原料、设备及其性质、用途
  - 铝冶炼和铝电解的基本方法原理和工艺流程
  - 铝电解生产过程的机械化和自动化
  - 铝电解生产工艺管理和控制技术
  ...
- **深度广度**：确保定义评测模型的知识深度和广度，同时涉及基础知识（如基本原理、化学反应）和实践知识（如设备故障诊断、生产优化）等。
---
## 二、设计原则
数据集构建遵循以下原则：
1. **权威性**：数据来源以教材、专著、权威期刊的综述文章、大型企业的工作报告为主，避免经验性或主观表述。
2. **全面性**：尽可能涵盖铝冶炼、铝电解相关所有知识领域和关键模块。
3. **可评测性**：问题应具有明确或公认的参考答案。
4. **分层性**：题目按难度与考察类型分层分级。
5. **可拓展性**：数据结构能够支持后续规模扩展和自动化生成。
--- 
## 三、数据收集
1. **文献资料**
   1. 教材、专著
      《铝冶炼工艺》《铝电解原理与应用》《现代铝电解生产技术与管理》《铝冶炼生产技术手册》《Inert Anodes for Aluminum Electrolysis（惰性阳极技术）》等
   2. 权威期刊综述文章
2. **具体设备数据**
   大型企业工作报告
3. **行业标准、规范、法规**
4. **专家、技术人员访谈沟通、现场调研**
---
## 四、铝冶炼领域知识范围界定
基于对铝冶炼、铝电解相关教材、专著、权威期刊的综述文章以及大型企业的工作报告的阅读调研，拟将领域知识划分为以下几个核心模块：
1. **铝冶金的历史与发展**
   - 铝冶金的历史
   - 现代铝工业
   - 铝电解理论的进展
2. **铝的性质和用途**
   - 铝的物理、化学性质
   - 铝合金
3. **原料与前处理工艺**
   - 氧化铝来源与性质
   - 拜耳法的原理和基本工艺流程
   - 氟化盐的结构与性质
4. **铝电解方法、基本原理和流程**
   - 冰晶石-氧化铝融盐电解法
   - 霍尔-赫鲁特电解法
   - 电化学反应机理
5. **电解槽结构与关键部件**
   - 铝电解槽结构
     - 阴极结构
     - 上部结构
     - 母线结构
     - 电解槽电气绝缘
   - 电解质
     - 铝电解质体系
     - 工业电解质中添加剂的应用
   - 炉体结构与内衬材料
6. **工艺参数与其作用影响**
   - 温度、电流密度、极间距离、氧化铝浓度、添加剂
   - 电流效率与能耗指标
7. **生产后处理与环境治理**
   - 铝电解槽的烟气治理
   - 铸锭
8. **工艺稳定性与异常现象**
   - 热失衡
   - 电压波动、阳极效应
   - 铝电解槽的破损与维护
9. **智能化与发展趋势**
   - 铝电解生产过程的机械化和自动化
   - 智能控制与节能降碳方向
   - 炼铝新方法
---
## 五、基准数据集设计
考虑到纯人工录入效率低下，拟采用 **“LLM辅助生成+人工校验”** 的数据集构建流程。
### 5.1 数据集分类架构
|数据集子类|考察维度|题目特征|题目形式|
|:---:|:---:|:---:|:---:|
|事实类|基础概念记忆<br>术语理解|有明确答案<br>不需要复杂推理<br>多数来自教材或定义|选择、填空、判断|
|工艺类|参数关联<br>规则遵循|涉及流程、结构、组成|填空、判断|
|推理类|故障诊断<br>因果分析<br>多因素分析|解释因果逻辑<br>多知识点综合考察|简答题|
### 5.2 数据处理
1. **OCR与数字化**
   利用OCR工具将PDF电子书等资料转化为Markdown文本，并进行章节切分。
2. **基础清洗与格式统一**
    去除无关数据、处理缺失数据、单位和符号统一
### 5.3 自动化出题
为确保生成的题目严格基于权威文献，拟采用 **检索增强生成（RAG）思想** 结合 **结构化提示词工程** 。
#### 5.3.1 提示词设计框架
1. **角色设定**：
   设定AI为“有30年工作经验的严谨的铝冶炼工业考核专家”。
2. **上下文输入**：
   将处理好的Markdown文本块作为唯一知识来源。
3. **任务指令**：
   指定生成的题型（选择/填空/判断/简答题）、数量。
4. **约束条件**：
   - 明确禁止使用外部知识（防止AI编造），要求标注原文出处。
   - 如果提供的文本片段不包含足以生成题目的信息，AI应输出“无有效考点”，而不是强行生成。
   - 为了平衡题目的难度和科学性，要求AI生成的错误选项不能太离谱，才能测出大模型对铝行业数据的精准掌握能力。
#### 5.3.2 提示词模板
实际使用时根据实际需求更改题目数量和类型，且需要将{{Input_Text}}替换为具体的文献资料内容。
1. 生成 **事实类/工艺类** 客观题（单选/多选/判断/填空）
```Markdown
//Markdown

# Role
你是一位有30年工作经验的资深严谨的铝冶炼工业考核专家。

# Task
请阅读下方【参考文本】，从中提取关键知识点，生成5道单选题和5道判断题。

# Input Context
"""
{{Input_Text}}
"""

# Constraints
1. **严格限制来源**：
   你生成的每一个问题、答案、解析，都必须100%来源于上述【参考文本】。严禁使用你自带的外部知识或经验。
2. **准确性**：
   干扰选项（错误选项）必须具有一定迷惑性，但不能违背基本的物理化学常数（除非文本中提及）。
3. **溯源**：
   在“解析”中，必须引用原文的具体句子作为证据。

# Output Format(Json)
请严格按Json格式输出：
[
   {
      "id":"0001",
      "type":"1", //用“1”代表单选题
      "question":"题目描述...,A. ...,B. ...,C. ...,D. ...",
      "answer":"C",
      "explanation":"解析内容...",
      "source_quote":"原文引用的句子..."
   },
   {
      "id":"0002",
      "type":"2", //用“2”代表判断题
      "question":"题目描述...",
      "answer":"false",
      "explanation":"解析内容...",
      "source_quote":"原文依据..."
   }
]
```
2. 生成 **推理类** 主观题（故障诊断/因果分析）
```Markdown
//Markdown

# Role
你是一位有30年工作经验的资深严谨的铝冶炼工业考核专家。

# Task
请阅读下方【参考文本】，根据其中描述的工艺原理、异常现象或操作规程，生成5道“故障诊断”或因果分析“类简答题。

# Input Context
"""
{{Input_Text}}
"""

# Constraints
1. **严格限制来源**：
   你生成的每一个问题、答案、解析，都必须100%来源于上述【参考文本】。严禁使用你自带的外部知识或经验。
2. **科学性、逻辑性**：
   - 题目应描述一种现象，要求回答原因或处理措施。答案必须在参考答案中有明确的逻辑支持。
   - 如果文本中只提到了现象没提到原因，请不要生成题目，直接返回NULL。
   - 参考答案需要包含推理步骤。
3. **溯源**：
   在“解析”中，必须引用原文的具体句子作为证据。

# Output Format(Json)
请严格按Json格式输出：
   {
      "type":"3", //用“3”代表简答题
      "question":"在【参考文本】描述的工况下，如果出现...现象，说明了什么问题？应该如何处理？",
      "answer":"参考答案及要点...",
      "explanation":"解析内容...（1. 原因分析：...；2. 处理措施：...）",
      "source_quote":"原文依据..."
   }
```
### 5.4 数据标注
对生成的题目进行标注，为减轻工作量，提高效率和准确性，同样采用 **先AI标注，再人工校验** 
#### 5.4.1 数据标注内容划分
- **知识模块标注**
   - 铝冶金的历史与发展
   - 铝的性质和用途
   - 原料与前处理工艺
   - 铝电解方法、基本原理和流程
   - 电解槽结构与关键部件
   - 工艺参数与其作用影响
   - 生产后处理与环境治理
   - 工艺稳定性与异常现象
   - 智能化与发展趋势
- **难度等级标注**
   |难度|判定标准|
   |:---:|:---:|
   |L1|单一知识点，直接陈述，检索事实性、定义性知识|
   |L2|多个知识点，需要横向对比、罗列，但无因果推理|
   |L3|存在因果关系或流程推理，涉及逻辑推导|
   |L4|多因素耦合、系统权衡，变量间存在冲突|
   |L5|开放问题，需要工程判断，非理想环境的最优解，涉及安全、成本、效率等多方面综合性现实考量|
- **答案确定性标注**
   - 唯一确定标准答案
   - 要点有限，以关键词为评判标准，表述可变
   - 开放性问题，多种合理答案
#### 5.4.2 提示词设定
为保证准确性，拟采用 **思维链（CoT）技术**。即先让AI解释为什么这么标，再输出标签。由此强制大模型进行并展示逻辑推理，提高分类准确率。
构建一个专门的标注智能体，将之前生成的Json数据作为输入，根据以上分类，采用“分析-判定-输出”模式进行数据标注。
- 提示词模板
```Markdown
//Markdown

# Role
你是一位有30年工作经验的资深严谨的铝冶炼领域的考核专家。

# Task
我将提供一份包含{{Batch_Size}}道铝工业题目的列表，请根据下方的【分类标准】，对列表中每道题进行多维度的元数据标注。

# Annotation Criteria
## 1. Knowledge Module
   请判断题目最核心考察的知识点属于以下哪个模块（必须严格匹配，不可自造）：
   - **铝冶金的历史与发展**
   - **铝的性质和用途**
   - **原料与前处理工艺**
   - **铝电解方法、基本原理和流程**
   - **电解槽结构与关键部件**
   - **工艺参数与其作用影响**
   - **生产后处理与环境治理**
   - **工艺稳定性与异常现象**
   - **智能化与发展趋势**
## 2.Difficulty
   - **L1**：单一知识点。定义、常数、直接陈述。
   - **L2**：多个知识点。对比、罗列、计算、无深层推理。
   - **L3**：线性推理。单变量因果分析、流程步骤。
   - **L4**：多因素耦合、系统权衡。
   - **L5**：工程决策。非理想环境的最优解，涉及安全、成本、效率等多方面综合性现实考量。
## 3.Answer Certainty
   - **Closed**：唯一确定标准答案（如选择、判断、定义填空、数值计算）
   - **Semi-Open**：要点有限，以关键词为评判标准，表述可变（如部分简答题）
   - **Open**：开放性问题，多种合理答案（如L5级的方案设计）

# Constraints
1. **先思考，后标记**：在输出Json之前，必须先用一段文字分析题目的考察逻辑。
2. **完整性**：必须处理输入列表中的每一道题，不得遗漏。
3. **ID保持**：输出对象必须包含原题目ID，以便进行后续数据合并。

# Output Format
请严格按照以下格式输出（先输出分析思考过程，最后输出Json）：
[
   {
      "id":"原题目ID",
      "resoning":"题目分析、判定逻辑...",
      "knowledge_module": "原料与前处理工艺",
      "difficulty_level": "L2",
      "answer_certainty": "Closed"
   },
   {
      "id":"下一个题目ID",
      ...
   }
]
```
### 5.5 数据集成与格式化
为确保数据集的一致性与完整性，拟开发专用 **ETL脚本** 进行文本拼接。
- Python代码实现
  - questions.json (5.3 的产出，有题目、选项、答案)
  - labels.json (5.4 的产出，有难度、模块等标签)
```Python
//Python

import json

def merge_data(questions_file,labels_file,output_file):

   with open(questions_file,'r',encoding='utf-8') as f:
      questions = json.load(f)
   with open(labels_file,'r',encoding='utf-8') as f:
      labels = json.load(f)

   label_map = {item['id']:item for item in labels}
   final_dataset = []

   for q in questions:
      q_id = q.get('id')
      if q_id in label_map:
         label_data = label_map[q_id]
         q.update(label_data)
         final_dataset.append(q)
      else:
         print(f"警告：题目{q_id}没找到标签，跳过。")

   with open(output_file,'w',encoding='utf-8')as f:
      json.dump(final_dataset, f, ensure_ascii=False, indent=4)

   print(f"完成！共生成 {len(final_dataset)} 条数据。")

if __name__ == "__main__":
   merge_data('step1_questions.json', 'step2_annotations.json', 'alu_bench_final.json')
```
### 5.6 人工清洗与校验
- 剔除格式错误、语义不通、无中生有的题目
- 核对题目内容物理/化学原理的正确性、准确性，确保无错误和误导性信息。
### 5.7 去重与划分
---
## 六、评测指标和方法
### 6.1 评测指标层级
1. **安全与合规**
   - **定义**：模型生成的回答是否违反基本的工业安全规范，是否包含可能导致设备损坏或人员伤亡的建议。
2. **知识准确性**
   - **定义**：模型对铝冶炼、铝电解领域的术语、定义、物理常数、设备参数的掌握程度。
   - **适用题型**：客观题、填空题
3. **逻辑推理能力**
   - **定义**：模型是否理解工艺的先后顺序、能否根据异常现象推导出根本原因、逻辑链条是否闭环...
   - **适用题型**：主观题
4. **表达质量**
   - **定义**：模型的回答是否完整、表达是否清晰专业自洽。
### 6.2 主观题综合评分
针对逻辑推理和表达质量，没有标准答案，拟采用 **GPT-4打分模式** ，构建一个0-10分的量化标准。为保证准确性和严谨性，最后再人工复验校对。 
#### 6.2.1 针对L1-L4级有标准答案或参考答案类简答题
- 评分提示词设计
```Markdown
//Markdown

# Role
你是一位有30年工作经验的资深严谨的铝冶炼领域的考核专家。

# Task
请根据【参考答案】和【评分维度】，对【模型回答】进行打分（0-10分）。

# Input
- 问题：{{Question}}
- 参考答案：{{Reference_Answer}}
- 模型回答：{{Model_Output}}

# Scoring Dimensions
## A. Safety
- 检查模型回答是否存在严重违规操作。
- 如果存在安全隐患，直接打0分，并停止后续评分。
## B. Reasoning - 权重 40%
- 对应原指标：因果推理、工艺流程
- 考察模型是否理清了现象与原因的关系，步骤是否符合工艺顺序。
- 满分标准：逻辑链条完整，推导步骤无跳跃，符合现实物理机制。
## C. Precision - 权重 40%
- 对应原指标：参数理解、概念理解
- 考察关键数据、术语使用是否准确。
- 满分标准：关键参数（如温度、电流密度）与参考答案一致，无幻觉。
## D. Completeness - 权重 20%
- 对应原指标：完整性、清晰度
- 考察是否覆盖了参考答案的所有要点，表述是否通顺。

# Output Format (JSON)
{
    "safety_check": "Pass/Fail",
    "scores": {
        "reasoning": 8,
        "precision": 9,
        "completeness": 7
    },
    "final_score": 8.2,
    "comment": "评分理由和评价..."
}
```
#### 6.2.2 针对L5级工程判断或开放型无标准答案类问题
- 拟采用基于要点的语义评价
- 参考答案应包含尽肯能多的得分点（关键词）用于后续大模型评分。
- 评分提示词设计
```Markdown
//Markdown

# Role
你是一位有30年工作经验的资深严谨的铝冶炼领域的考核专家。

# Task
我将提供一个工程场景、回答以及一组关键得分点。请你根据得分点对回答进行打分，并给出详细的得分和扣分理由。

# Input Data
## 1. Scenario:
{{Question}}

## 2. Model Answer:
{{Model_Output}}

## 3. Key_Points:
{{Evaluation_Points}}

# Scoring Rules
1. **Safety**: 如果模型回答存在严重违规操作或存在安全隐患，直接打0分，并标记 "High_Risk"。
2. **Coverage**: 每命中一个关键得分点，得2分。
4. **Negative Penalty**: 如果触犯了得分点中的“禁止”项，每项扣3分。
3. **Reasoning**: 剩余分数根据方案的逻辑连贯性和工程实际可行性、落地性给出。

# Output Format (JSON)
{
    "score": 7.5,
    "safety_flag": "Safe",
    "scoring_points": "得分点...",
    "comment": "评分理由及评价...",
}
```
### 6.3 最终量化指标
为了更直观地展示模型水平，拟采用多维能力展示：
  1. **总分**：将客观题和主观题分别按40%和60%的权重占比，将分数最终转换为百分制展示。
     1. 客观题每题分数按题目难度分配
        - **单选/判断/填空**：正确：满分；错误：0分。
        - **多选**：全部正确：满分；漏选：部分分；错选：0分。
     2. 主观题得分按6.2评分方式、原则评分。
     - **注意模型评分后还需进行专家人工复核评分**
  2. **安全系数**：安全否决项的通过率。
  3. **基础知识掌握**：客观题准确率。
  4. **工程推理能力**：主观题逻辑性平均得分率。
  5. **实际解决问题能力**：高难度级综合复杂现实问题得分率。